@model IEnumerable<PizzaCore.Data.Entities.ProductByCategory>
@section Styles{
  <link rel="stylesheet" href="~/css/menu.css" /> }

@{
  ViewData["Title"] = "Menu";
}

<!-- Navigation -->
<nav id="category-nav-container">
  <a class="category-nav-item" href="#Pizzas-Section">Pizzas</a>
  <a class="category-nav-item" href="#Burgers-Section">Burgers</a>
  <a class="category-nav-item" href="#Fries-Section">Fries</a>
  <a class="category-nav-item" href="#Drinks-Section">Drinks</a>
</nav>

<!-- Products -->
@if (Model != null)
{
  @foreach (var item in Model)
  {
    <!-- Category -->
    <h2 id="@(item.Category)-Section">@(item.Category)</h2>
    <section class="menu-grid-container">

      <!-- Product -->
      @foreach (var product in item.Products)
      {
        <div class="menu-item">
          <div class="item-image">
            <img src="~/images/products/@(product.ImageId).jpg" />
          </div>
          <div class="item-title">@product.Name</div>
          <div class="item-description">@product.Description</div>
          <div class="item-size-price">
            <!-- Add drop down for size selection only if the product has multiple sizes-->
            @if (product.Sizes.Count() > 1)
            {
              <!-- Add each size as a option in the drop down menu, call updatePrice() when the selection is changed -->
              <select class="size-select" onchange="updatePrice(this, @product.GetPricesBySizeAsJson())">
                @foreach (var productSize in product.Sizes)
                {
                  <option value="@(productSize.Size)">@(productSize.Size)</option>
                }
              </select>
            }
            <span class="item-price">$@product.Sizes.First().Price</span>
          </div>
          <div class="item-action-container">
            <button class="item-cart-add">Add</button>
          </div>
        </div>
      }
    </section>
  }
}
